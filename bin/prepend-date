#!/bin/bash

# Notes: Prepend the modification date of a file to its name
# Usage:
# prepend-date file1 [file2 ...]

FILES="$@"

for file in $FILES
do
    # Get file modification date
    dt=`date -r "$file" +%F`
    # Split file directory and basename
    file_dir=`dirname $file`
    basename=`basename $file`
    # Enter the directory, rename and return
    pushd "$file_dir"
    mv "$basename" "$dt.$basename"
    popd
done

